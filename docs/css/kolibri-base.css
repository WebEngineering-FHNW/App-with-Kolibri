/* make sure to keep in line with kolibriStyle.js */

@import "./kolibri-fonts.css";
@import "./kolibri-light-palette.css"; /* must choose the palette to make the colors work */
@import "./kolibri-colors.css";


:root {
    --_kolibri-color-product-base: 280 90% 30%;                       /* allow for transparent variants */
    --kolibri-color-product: hsl(var(--_kolibri-color-product-base)); /* the color that identifies the Kolibri product */
    --kolibri-color-accent:  var(--kb-hsla-danger-accent);
    --kolibri-color-output:  var(--kb-hsla-secondary-dark);
    --kolibri-color-ok:      var(--kb-hsla-success-accent);
    --kolibri-color-select:  var(--kb-color-hsl-yellow-400); /* make custom use of the palette */
    --kolibri-color-neutral: var(--kb-color-hsla-black-40);
    --kolibri-color-shadow:  hsla(var(--_kolibri-color-product-base) / 20%);
    --kolibri-box-shadow:    0 4px  8px 0 var(--kolibri-color-shadow),
                             0 6px 20px 0 var(--kolibri-color-shadow);
    padding:                 0;
    margin:                  0;
}
*, *::before, *::after {
    box-sizing: border-box;
}
::selection {
    background-color: var(--kolibri-color-select);
}

/* --- typography --- */

:root {
    font-family: var(--kb-font-family-default), system-ui;
}

header, h1, h2 {
    color: var(--kolibri-color-product);
}

header h1 {
    letter-spacing: 0.06em;
}

h1, h2, h3 {
    font-family: var(--kb-font-family-stylish),var(--kb-font-family-default), system-ui;
    font-weight: normal;
}
div, p, ul, ol, dl {
    font-family: var(--kb-font-family-running-text),var(--kb-font-family-default), system-ui;
}
div, p, ul, ol, dl,
form, fieldset, label, input, button {
    letter-spacing: 0.02em;
}

/* --- default invalid handling --- */
:invalid {
    border-color: var(--kolibri-color-accent);
}
input:invalid {
    border-color: transparent transparent var(--kolibri-color-accent) transparent;
}
input[type=text]:invalid {
    color: var(--kolibri-color-accent);
}
/* We cannot use pseudo elements with input type text so we introduce an extra following span.
   Note that the html structure is label - span ( input - span) like in simpleInputProjector.
*/
label + span { /* the "holder" span for the input comes right after a label */
    position:   relative; /* such that we can position against it */
}
label + span > input + span {
    position:   absolute; /* get it out of the stacking context */
    top:        0;
    left:       0;
    width:      1ch;
    aspect-ratio: 1;
    transform:  translateX(-5ch);
}
label + span > input:invalid + span {
    background-image: radial-gradient(circle closest-side, white 0%, white 20%, var(--kolibri-color-accent) 99%, transparent 100%);
    filter:           drop-shadow(0 0 .2ch var(--kolibri-color-accent));
    transform:        translateX(-1ch);
    transition:       transform 0.5s ease-out;
}
/* --- end default invalid handling --- */


/* --- logo handling -- */
/* The information about where the actual logo file is, the format, etc. should
   not be distributed over all the files but kept in one place.
   Since the logo is decorative only, we avoid having to set fake "alt" attributes.
 */

.kolibri-logo {
	height:             342px;
	aspect-ratio:       1;
	background-image:   url("../img/logo/logo.svg"); /* keep in one place */
	background-repeat:  no-repeat;
    background-size:    contain;
}

/* --- fun stuff with the logo --- */

.kolibri-logo-anim {
	animation:          kolibri_fly_in 2s ease;
}
@keyframes kolibri_fly_in {
	0% {
		transform: scaleX(-1)  scale(0.4) translateX(400%) rotate(-30deg);
	}
	60% {
		transform:             scale(0.6) translateX(300%) rotate(-30deg);
	}
	100% {
		transform:             scale(1.0) translateX(0)    rotate(  0deg) ;
	}
}
@media (prefers-reduced-motion: reduce) {
    .kolibri-logo-anim {
        animation-duration: 0.01ms ;
  }
}

/* --- a11y support: the "skip" link --- */

a.skip-link { /* position top center */
    position:     absolute;
    z-index:      100;
    top:          1em;
    left:         50%;
    transform:    translateX(-50%);
}

/* hide if not tabbed to
   but in such a way that it still can be tabbed to */
a.skip-link:not(:focus):not(:active) {
    position:   absolute;
    overflow:   hidden;
    height:     1px;
    width:      1px;
    clip:       rect(0 0 0 0);
    clip-path:  inset(50%);
    white-space: nowrap;
}
