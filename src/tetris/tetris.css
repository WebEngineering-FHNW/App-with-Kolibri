@import "scene3D/scene.css";

:root {
    --box-width: 6;
}

html {
    overscroll-behavior: none;
}

body {
    min-height:             100dvh;
    display:                grid;
    grid-template-columns:  100%;
    grid-template-rows:     1fr max-content;
    margin:                 0;
    background:             linear-gradient(in srgb-linear, blue, orange);
}

footer {
    padding:     1lh;
    display:     grid;
    place-items: center;
    color:       white;
    font-size:   120%;
}

.floor {
    position:         absolute;
    inset:            0;
    width:            100%;
    height:           100%;
    background-image: repeating-conic-gradient(transparent 0deg 90deg, black 90deg 180deg);
    background-size:  calc(var(--box-width) * 2 * 1cqmin) calc(var(--box-width) * 2 * 1cqmin);
    opacity:          0.3;

    & .toplight {
        position:         absolute;
        inset:            0;
        background-image: radial-gradient(white 30%, black 80%);
        opacity:          .85;
    }
}

.tetromino {
    transform-style: preserve-3d;
    grid-area:       1/1;
    display:         grid;
    --z-center:      calc(1cqmin * var(--box-width) / 2);
    --tetromino-x:   0;
    --tetromino-y:   0;
    --tetromino-z:   0;
    translate:       calc(var(--tetromino-x) * var(--box-width) * 1cqmin) calc(var(--tetromino-y) * var(--box-width) * 1cqmin);
    transform:       translateZ(calc(var(--tetromino-z) * var(--box-width) * 1cqmin + var(--z-center)));
    transition:      translate .2s linear,
                     transform 1s linear;
}

/* provides the logical group */
.box {
    grid-area:       1/1;
    --x:             0;
    --y:             0;
    --z:             0;
    width:           calc(var(--box-width) * 1cqmin);
    aspect-ratio:    1 / 1;
    display:         grid; /* child positioning  */
    transform-style: preserve-3d; /* put children in our 3d space */
    translate:       calc(var(--x) * var(--box-width) * 1cqmin) calc(var(--y) * var(--box-width) * 1cqmin) calc(var(--z) * var(--box-width) * 1cqmin);
    transition:      all .1s linear;
}

/* all children go directly on top of each other */
.box > * {
    grid-area:     1/1;
    background:    grey;
    opacity:       .8;
    border-radius: 3%;
    border:        1px solid #C9FF;
}

/* the transform origin for rotate is center by default, so rotations must first */
/* put the respective face in the the center, then rotate.            */
.box :nth-child(1) {
    transform: translateZ(var(--z-center));
}

/* move front to center */
.box :nth-child(2) {
    transform: rotateY(180deg) translateZ(var(--z-center));
}

/* center, then around Y-axis to the back */
.box :nth-child(3) {
    transform: rotateY(-90deg) translateZ(var(--z-center));
}

/* center, then around Y-axis to the left */
.box :nth-child(4) {
    transform: rotateY(90deg) translateZ(var(--z-center));
}

/* center, then around Y-axis to the right */
.box :nth-child(5) {
    transform: rotateX(90deg) translateZ(var(--z-center));
}

/* center, then around X-axis to the top */
.box :nth-child(6) {
    transform: rotateX(-90deg) translateZ(var(--z-center));
}

/* center, then around X-axis to the bottom */


.shapeI .box * {
    background-color: cyan;
}

.shapeT .box * {
    background-color: red;
}

.shapeO .box * {
    background-color: blueviolet;
}

.shapeS .box * {
    background-color: yellow;
}

.shapeZ .box * {
    background-color: lime;
}

.shapeL .box * {
    background-color: orange;
}

.shapeF .box * {
    background-color: white;
}

.ghost .box * {
    background-color: transparent;
    border:           none;
}

.ghost .box :nth-child(2) { /* floor face */
    background-color: yellow;
    box-shadow:       0 0 3cqmin yellow;
    opacity:          1;
}

.plane {
    border: 4px solid #99Fe;

    &.show {
        background: #99F9;
    }
}

.yz-plane {
    transform-origin: left top;
    transform:        rotateY(-90deg);
}
